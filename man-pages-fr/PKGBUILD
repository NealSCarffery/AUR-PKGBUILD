# Maintainer: X0rg

pkgname=man-pages-fr
pkgver=3.51.1
_pkgver=3.51-1 #Format non-autorisé en tant que variable pkgver.
pkgrel=1
pkgdesc="Pages de manuel Linux francophones de 'Traduc.org'"
arch=('any')
url="http://traduc.org/perkamon/"
license=('custom')
replaces=('man-pages-extras-fr' 'man-pages-sup-fr')
options=(docs)
install=man-pages-fr.install
changelog=ChangeLog
source=(https://alioth.debian.org/frs/download.php/file/3905/$pkgname-$_pkgver.tar.xz)
md5sums=('4292acd15961647894d77277a44fa4f3')

build() {
	cd $srcdir/fr
	msg2 "Supprime le fichier README.fr dans $(pwd)..."
	rm -v README.fr
	msg2 "Renomme certaines pages de manuel françaises pour éviter des conflits..."
	mv -v ./man3/getspnam.3				./man3/getspnam2.3
	mv -v ./man5/passwd.5				./man5/passwd2.5
	mv -v ./man3/pthread_attr_init.3		./man3/pthread_attr_init2.3
	mv -v ./man3/pthread_attr_setdetachstate.3	./man3/pthread_attr_setdetachstate2.3
	mv -v ./man3/pthread_attr_setinheritsched.3	./man3/pthread_attr_setinheritsched2.3
	mv -v ./man3/pthread_attr_setschedparam.3	./man3/pthread_attr_setschedparam2.3
	mv -v ./man3/pthread_attr_setschedpolicy.3	./man3/pthread_attr_setschedpolicy2.3
	mv -v ./man3/pthread_attr_setscope.3		./man3/pthread_attr_setscope2.3
	mv -v ./man3/pthread_cancel.3			./man3/pthread_cancel2.3
	mv -v ./man3/pthread_cleanup_push.3		./man3/pthread_cleanup_push2.3
	mv -v ./man3/pthread_cleanup_push_defer_np.3	./man3/pthread_cleanup_push_defer_np2.3
	mv -v ./man3/pthread_create.3			./man3/pthread_create2.3
	mv -v ./man3/pthread_detach.3			./man3/pthread_detach2.3
	mv -v ./man3/pthread_equal.3			./man3/pthread_equal2.3
	mv -v ./man3/pthread_exit.3			./man3/pthread_exit2.3
	mv -v ./man3/pthread_join.3			./man3/pthread_join2.3
	mv -v ./man3/pthread_kill.3			./man3/pthread_kill2.3
	mv -v ./man3/pthread_kill_other_threads_np.3	./man3/pthread_kill_other_threads_np2.3
	mv -v ./man3/pthread_self.3			./man3/pthread_self2.3
	mv -v ./man3/pthread_setcancelstate.3		./man3/pthread_setcancelstate2.3
	mv -v ./man3/pthread_setschedparam.3		./man3/pthread_setschedparam2.3
	mv -v ./man3/pthread_sigmask.3			./man3/pthread_sigmask2.3
	mv -v ./man3/pthread_testcancel.3		./man3/pthread_testcancel2.3
}

package() {
	mkdir -p $pkgdir/usr/share/man/
	msg2 "Mise en place des pages de manuel francophones..."
	mv -v $srcdir/fr $pkgdir/usr/share/man/
}
