# Maintainer: X0rg

pkgname=gnustep-gui-clang-git
_gitname=gnustep-gui
pkgver=7426.93e8ef8
pkgrel=1
pkgdesc="The GNUstep GUI class library, using Clang"
arch=('any')
url="http://www.gnustep.org/"
license=('GPL3' 'LGPL3')
groups=('gnustep-clang-git')
depends=('libtiff' 'libjpeg-turbo' 'libpng')
makedepends=('git' 'clang' 'make' 'gnustep-opal-clang-git')
optdepends=('giflib'
	'aspell'
	'libcups'
	'audiofile'
	'portaudio'
	'libsndfile'
	'libao')
conflicts=('gnustep-gui' 'gnustep-gui-svn')
source=('git://github.com/gnustep/gnustep-gui.git')
md5sums=('SKIP')

pkgver() {
  cd $_gitname
  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

build() {
  cd $_gitname
  source /usr/share/GNUstep/Makefiles/GNUstep.sh

  if [[ $(locale -a | grep french) == "french" ]];then msg2 "Exécute 'configure'..."
  else
    msg2 "Run 'configure'..."
  fi
  OBJCFLAGS=-fblocks CC=clang CXX=clang++ ./configure --prefix=/usr --sysconfdir=/etc/GNUstep

  if [[ $(locale -a | grep french) == "french" ]];then msg2 "Exécute 'make'..."
  else
    msg2 "Run 'make'..."
  fi
  make
}

package() {
  cd $_gitname
  make DESTDIR="$pkgdir" install
}
